## 三、文件搜索命令
### 文件搜索命令locate
- 格式：locate 文件名
- 查找方式：
    - 不直接搜索硬盘，在该指令预设的/var/lib/mlocate资料库中找（注意：不同Linux版本，资料库的名字可能有区别，有的叫slocate，locatedb等）。所以查找速度很快。
    - 根据/var/updatedb.conf配置文件搜索，这个文件中如果排除了的文件，目录等将不会被更新。
  - 优点：查找速度快；
  - 缺点：/var/lib/mlocate资料库不是实时更新的，每天更新一次。所以新创建的文件需要等到第二天才能找到。
  - 只可以按照文件名搜索
- updatedb命令：强制更新数据库。/var/updatedb.conf配置文件中排除的目录不会被更新。
- 

### 命令搜索命令whereis 和 which
#### whereis
- 搜索命令所在路径及帮助文档所在位置
- 格式：whereis [选项] 命令名。
    - 并不是所有命令都可以找到，只有外部安装的命令才可以找到，像cd等shell(命令窗口)自带的内部命令是搜索不到的。
    - 注意：不能搜索普通文件。
- 选项：
    - -b：只查找可执行文件
    - -m：只查找帮助文件

#### which
- 搜索命令及其别名所在路径
- 格式：which 系统命令

#### whereis和which的区别
- whereis可以看到命令的帮助文档
- which可以查找到命令的别名

#### 补充
在Linux中执行可执行文件，其实只有一种方式，就是使用绝对路径，比如：/bin/ls。但是你发现，我们平时都是直接使用 ls 的，并没有使用绝对路径。那是因为系统为我们提供了环境变量，使用命令“echo $PATH”，会出现“/usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin”，使用冒号分割（Windows中是使用分号分割），在使用 ls 命令时，会依次在这些目录中查找。如果没有则报错。

### 文件搜索命令find
#### 定义
在指定目录下查找文件。任何位于参数之前的字符串都将被视为欲查找的目录名。如果使用该命令时，不设置任何参数，则find命令将在当前目录下查找子目录与文件。并且将查找到的子目录和文件全部进行显示。
#### 格式
find [搜索范围] [搜索条件]
#### Linux中的通配符
find搜索，不是模糊搜索，是精确搜索。如果想要模糊搜索需要使用Linux中的通配符，如下：
- \*：匹配任意内容，比如：find /root -name "install.log*"。
- ?：匹配任意一个字符；
- []：匹配任意一个中括号中的字符，比如：find /root -name ab[cd]，查找abc或abc文件。
#### 参数
- -name：之后写文件名字，区分大小写，比如：find /root -name "install.log*"。
- -iname：文件名不区分大小写。
- -user：按照所有者区分，比如：find /root -user root。
- -nouser：查找没有所有者的文件，比如：find /root -nouser。注意：没有所有者意味着可能是垃圾文件，需要手动清除掉。例外情况，①如果这个文件是由内核产生的，内核直接调用它，不经过系统目录。比如：/sys，/proc目录是内存数据相关，这两个目录中有没有所有者的文件是正常的，不要随便删除；②外来数据可能没有所有者。比如：Windows中产生的文件，copy到Linux，因为Windows忽略了所有者（Windows有所有者，只是忽略了），所以copy过来的文件也没有所有者。
- -mtime，-atime，-ctime：
  - 格式：find /var/log mtime +10 
  - -mtime：m 英文 modify缩写，修改文件内容时间，以“天”为时间单位；
  - -atime：a 英文 access缩写，文件访问时间，以“天”为时间单位；
  - -ctime：c 英文 change缩写，改变文件属性时间，以“天”为单位；
  - +10：以当前系统时间为准，10天前修改的文件
  - 10：10天当天修改的文件
  - -10：10天内修改的文件
- -size
  - 按文件大小查找文件 
  - 格式1：find . -size 25k
    - +25k：大于25k
    - 25：等于25k
    - -25：小于25k
    - 注意：25k后“k”是小写，但是25M单位M是大写，Linux是严格区分大小写的，不能写错。如果25后面什么也不写，默认单位是“扇区”，一个扇区是512字节，25*512字节大小的文件。
  - 格式2：find /ect -size +25k -a -size -50k
    - 查找/ect目录下大于25k且小于50k的文件
    - -a：and 逻辑与
    - -o：or 逻辑或 
  - 格式3：find . -size +25k -a -size -50k exec ls -lh {} \;
    - 查找/ect目录下大于25k且小于50k的文件，并显示详细信息
    - exec/-ok 命令 [选项] {} \;  对搜索结果执行操作。
      - 命令：必须可以处理第一条命令find执行出的结果的命令才可以。相当于把find命令的执行结果，当做是第二条命令的操作对象。
- -inum
    - 按照i节点查找文件
    - 格式：find . -inum i节点号码
      - 知道文件名，查i节点号，用：ls -i  
#### 优缺点
- 优点
    - Linux中最强大的搜索命令，各种各样的 选项 和 操作对象。
- 缺点
    - 搜索效率比较低。

### 字符串搜索命令grep

- 在文件当中匹配符合条件的字符串
- 格式：grep [选项] 字符串 文件名
  - 字符串用双引号引起来
  - 选项
    - -i：ignore 忽略大小写
    - -v：取反，排除指定字符串  

### find命令和grep命令的区别
- find：在系统当中搜索符合条件的文件名，如果使用匹配，使用通配符匹配，通配符是完全匹配；
- grep：在文件当中搜索符合条件的字符串，如果使用匹配，使用正则表达式进行匹配，正则表达式匹配是包含匹配。
- **通配符** 和 **正则表达式** 的选择：如果搜索的是文件名，选择使用find，进行通配符的完全匹配；如果搜索的是文件内容，选择使用grep，进行正则表达式的包含匹配。

