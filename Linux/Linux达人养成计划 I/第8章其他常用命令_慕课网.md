
## 七、其他常用命令
### 挂载命令
#### 挂载
Linux中常用的一些硬盘、光盘、U盘等都必须挂载之后才能正确使用，所谓**挂载**，就相当于Windows当中的分配盘符，Windows中分配盘符是用CDEF盘，而在Linux系统中使用系统目录（挂载点）挂载。
- 自动挂载
  - 比如：硬盘、分区
  - 我们在安装时，设置挂载根分区，比如：/home，/boot 等分区。每次开机后我们就不用再操作了，开机后会自动挂载。
- 手动挂载
  - 比如：光盘、U盘等存储设备。
#### 挂载命令
- mount：查询系统中已经挂载的设备
  - 执行命令：
    - 第一行：/dev/sda5 on / type ext4 (rw)
      - /dev：主要硬件设备目录
      - /sda5：第三位a表示第一块硬盘，b代表第二块硬盘，以此类推。5表示第一块逻辑分区。
      - /dev/sda5 on /：第一块sd硬盘的第一个逻辑分区是根分区，也就是**挂载点**是根分区。
      - type ext4 (rw)：文件系统类型是ext4，权限是rw“读写”
    - 
- mount -a ：根据配置文件/etc/fstab进行自动挂载
  - 光盘、U盘等不建议设置开机自动挂载，如果你忘记在光驱里放光盘或者插入U盘，那么在Linux启动的时候，Linux系统就会直接崩溃。

#### 挂载命令格式
mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点
- 选项：
  - -t文件系统：加入文件系统类型来指定挂载的类型，可以ext3，ext4，iso9660等文件系统
    - 文件系统：格式化要做的事情，格式化就是要写入文件系统。要做两件事：①把分区分成等大小的block；②给每个文件建立i节点，即索引节点。
    - ext3：标准文件系统
    - ext4：标准文件系统，CentOS6以上
    - iso9660：光盘
  - -o特殊选项：可以指定挂载的额外选项。
    - 非常多，了解即可。
    - exec/noexec：挂载点是否可以执行可执行文件，默认是exec可执行
      - vi hello.sh：写一个脚本文件
        - 第一行：#!/bin/bash。表示这是一个可执行脚本，这里的#不是注释。但是，如果写的是纯linux脚本，没有上面那句话是可以执行该脚本的。但是经常会有一些复杂脚本嵌套了其他语言，如果省略，是无法执行的。
        - 在Linux脚本中最大的好处就是Linux的所有命令都是可以直接执行的，echo "hello world"(echo是输出命令)。“:wq”保存退出。
        - 执行脚本前，赋予权限：chmod 755 hello.sh
        - 执行脚本：./hello.sh  或者  绝对路径/home/hello.sh
      - mount -o remount,noexec /home：你会发现ll命令后，你有执行权限，但是你就是无法执行hello.sh脚本。这就是应为你修改了挂载特殊选项noexec。
- 设备文件名
  - /dev/sda
  - 光盘和U盘：有自己的设备文件名
- 挂载点：相当于Windows中的盘符，Linux中用空目录作为挂载点。

#### 挂载光盘
- 在虚拟机中添加CentOS6.3光驱，注意设备装填“已连接”“打开电源时连接”要记得勾选。
- 查找设备文件名：光盘有固定的设备文件名sr0，在/dev/cdrom中可查看
- 建立挂载点：mkdir /mnt/cdrom
- 挂载光盘：mount -t iso9660 /dev/cdrom /mnt/cdrom
  - /dev/cdrom：cdrom也可写成sr0。因为ll /dev/cdrom会发现sr0是cdrom的软链接。推荐使用sr0。
  - 简写：mount /dev/sr0 /mnt/cdrom
- 读取光盘数据：ls /mnt/cdrom：去该目录下读取光盘数据

#### 卸载命令
- umount 设备文件名或者挂载点
  - umount /mnt/cdrom 或者 /dev/sr0
  - 注意：[root@SL cdrom]# umount /mnt/cdrom。执行命令会报错，因为你现在在cdrom中，你没有办法卸载cdrom。需要退出去。
- 必须卸载，否则光驱中的光盘是无法拿出来的。

#### 挂载U盘
- 找到设备文件名：fdisk -l
  - U盘类似于硬盘，设备文件名类似于分区的命名sda1等，由于其走的是硬盘的逻辑体系，她的名字不是固定的。比如：系统有一块硬盘，那么U盘作为第二块系统盘，其设备文件名应为sdb1；系统有两块硬盘，那么U盘作为第三个系统盘，其设备文件名应为sdc1。
  - 系统分区命令：fdisk -l 。查找系统系已经识别的硬盘，如果U盘插入，也会显示出来，就找到了设备文件名。
- 建立挂载点
  - mkdir /mnt/usb
- 挂载U盘
  - mount -t vfat /dev/sdb1 /mnt/usb
    - vfat：文件系统，默认是windows中的fat32系统。但是在硬盘中这个文件系统已经被淘汰了，因为其要求单个文件最大不超过4G。
    - Linux系统默认不支持NTFS文件系统。不能直接在Linux中挂载移动硬盘，想要挂载，需要重新编译Linux内核，然后将NTFS系统勾选（学习内核编译最少需要5个小时）；或者，下载ntfs-3，安装到Linux系统即可。这两种方式使得Linux支持NTFS，但是只有只读权限。
    - 实际工作中，如果需要Windows中的数据我们都是通过**网络传输**的
- 读取U盘数据


### 用户登录查看和用户登录交互命令
#### 查看用户登录信息
##### w 命令
- 执行w命令输出内容
  - USER：登录的用户名
  - TTY：登录终端
    - tty1：表示本机终端，也就是我们从虚拟机中登录进来一个。
    - pts/0：表示远程终端，Windows中的。
  - FROM：
    - -：本地登录是没有IP的
    - IP：远程
  - LOGIN：登录时间
  - IDLE：用户闲置时间
  - JCPU：越大，耗费资源越多。
  - PCPU：越大，耗费资源越多。
  - WHAT：当前正在运行的命令
    - -bash：在bash中等待操作

##### who 命令
- 执行who命令输出内容
  - 登录的用户名：只有值，没有w命令输出内容中USER等属性
  - 登录终端
    - tty1：表示本机终端，也就是我们从虚拟机中登录进来一个。
    - pts/0：表示远程终端，Windows中的。
  - 时间(IP)

#### 查看当前登录和过去登录的信息
##### last命令
- 读取/var/log/wtmp文件数据：vi var/log/wtmp发现是一堆二进制乱码，避免人为修改。
- 命令输出：
  - 用户名
  - 登录终端
  - 登录IP
  - 登录时间
  - 退出时间（在线时间）
- 如果发现不是自己登录，可能有黑客

#### 查看所有用户的最后一次登录时间
##### lastlog命令
- 读取/var/log/lastlog文件数据
- 命令输出内容
  - 用户名
  - 登录终端
  - 登录IP
  - 最后一次登录时间